<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional Video Downloader</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 1s ease-out;
    }

    .header h1 {
      color: white;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .header p {
      color: rgba(255,255,255,0.9);
      font-size: 1.1rem;
    }

    .input-section {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      animation: fadeInUp 1s ease-out 0.3s both;
    }

    .input-group {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }

    .url-input {
      flex: 1;
      padding: 15px 20px;
      border: 2px solid #e1e5e9;
      border-radius: 50px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: white;
    }

    .url-input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }

    .fetch-btn {
      padding: 15px 30px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      min-width: 120px;
    }

    .fetch-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    .fetch-btn:active {
      transform: translateY(-1px);
    }

    .fetch-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .error-message {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      animation: shake 0.5s ease-in-out;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: white;
      animation: fadeIn 0.5s ease-out;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(255,255,255,0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    .video-info {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      animation: fadeInUp 0.6s ease-out;
    }

    .video-header {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      align-items: flex-start;
    }

    .video-thumbnail {
      width: 200px;
      height: 150px;
      object-fit: cover;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    .video-thumbnail:hover {
      transform: scale(1.05);
    }

    .video-details h3 {
      color: #2c3e50;
      font-size: 1.4rem;
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .video-meta {
      display: flex;
      gap: 20px;
      margin-top: 15px;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #7f8c8d;
      font-size: 14px;
    }

    .formats-section {
      margin-top: 30px;
    }

    .formats-title {
      color: #2c3e50;
      font-size: 1.3rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .format-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
    }

    .format-card {
      background: white;
      border: 2px solid #ecf0f1;
      border-radius: 15px;
      padding: 20px;
      transition: all 0.3s ease;
      animation: fadeInUp 0.5s ease-out;
    }

    .format-card:hover {
      border-color: #667eea;
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .format-type {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .type-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-video {
      background: #e8f4fd;
      color: #2980b9;
    }

    .badge-audio {
      background: #fef9e7;
      color: #f39c12;
    }

    .badge-video-audio {
      background: #edf7ed;
      color: #27ae60;
    }

    .format-specs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .spec-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #ecf0f1;
      font-size: 14px;
    }

    .spec-label {
      color: #7f8c8d;
      font-weight: 500;
    }

    .spec-value {
      color: #2c3e50;
      font-weight: 600;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .download-btn {
      flex: 1;
      padding: 12px 20px;
      background: linear-gradient(45deg, #27ae60, #2ecc71);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      font-size: 14px;
    }

    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(39, 174, 96, 0.3);
      color: white;
      text-decoration: none;
    }

    .download-btn:active {
      transform: translateY(0);
    }

    .preview-btn {
      flex: 1;
      padding: 12px 20px;
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      font-size: 14px;
    }

    .preview-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
      color: white;
      text-decoration: none;
    }

    .preview-btn:active {
      transform: translateY(0);
    }

    .copyright {
      text-align: center;
      margin-top: 40px;
      padding: 20px;
      color: rgba(255,255,255,0.8);
      font-size: 14px;
      animation: fadeIn 1s ease-out 1s both;
    }

    /* Notification System Styles */
    .notification-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(45deg, #ff6b6b, #ee5a5a);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      z-index: 9999;
      animation: pulse 2s infinite;
    }

    .notification-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4444;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: bounce 1s infinite;
    }

    .notification-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: rgba(255,255,255,0.98);
      backdrop-filter: blur(20px);
      box-shadow: -5px 0 20px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      z-index: 10000;
      overflow-y: auto;
    }

    .notification-panel.open {
      right: 0;
    }

    .notification-header {
      padding: 20px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .notification-header h3 {
      margin: 0;
      font-size: 1.2rem;
    }

    .close-notifications {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s ease;
    }

    .close-notifications:hover {
      background: rgba(255,255,255,0.3);
    }

    .notification-content {
      padding: 20px;
      min-height: calc(100vh - 80px);
    }

    .notification-item {
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    .notification-item:hover {
      transform: translateX(-5px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    .notification-item.unread {
      border-left: 4px solid #667eea;
      background: #f8f9ff;
    }

    .notification-title {
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 5px;
    }

    .notification-message {
      color: #7f8c8d;
      font-size: 14px;
      line-height: 1.4;
    }

    .notification-time {
      color: #bdc3c7;
      font-size: 12px;
      margin-top: 5px;
    }

    .no-notifications {
      text-align: center;
      color: #7f8c8d;
      font-style: italic;
      margin-top: 50px;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    @keyframes pulse {
      0% { box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
      50% { box-shadow: 0 5px 25px rgba(255,107,107,0.5); }
      100% { box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-5px); }
      60% { transform: translateY(-3px); }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOutRight {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      .header h1 {
        font-size: 2rem;
      }

      .input-group {
        flex-direction: column;
      }

      .video-header {
        flex-direction: column;
        text-align: center;
      }

      .video-thumbnail {
        width: 100%;
        max-width: 300px;
        margin: 0 auto;
      }

      .format-grid {
        grid-template-columns: 1fr;
      }

      .notification-panel {
        width: 100%;
        right: -100%;
      }

      .notification-btn {
        top: 10px;
        right: 10px;
        width: 45px;
        height: 45px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1><i class="fas fa-video"></i> Professional Video Downloader</h1>
      <p>Download videos from Instagram, YouTube and more platforms with ease</p>
    </div>

    <!-- Input Section -->
    <div class="input-section">
      <div class="input-group">
        <input type="text" class="url-input" id="videoUrl" placeholder="ðŸ”— Paste your video URL here (Instagram, YouTube, etc.)" />
        <button class="fetch-btn" id="fetchBtn">
          <i class="fas fa-search"></i> Fetch Video
        </button>
      </div>
      <div id="urlError" class="error-message" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <span></span>
      </div>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading" style="display: none;">
      <div class="spinner"></div>
      <p><i class="fas fa-download"></i> Fetching video information...</p>
    </div>

    <!-- Video Info -->
    <div id="videoInfo" class="video-info" style="display: none;"></div>

    <!-- Copyright -->
    <div class="copyright">
      <p><i class="fas fa-copyright"></i> 2024 Professional Video Downloader by Asmit. All rights reserved.</p>
      <p><small>This tool respects content creators' rights. Please ensure you have permission to download content.</small></p>
    </div>
  </div>

  <!-- Notification Button -->
  <button class="notification-btn" id="notificationBtn">
    <i class="fas fa-bell"></i>
    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
  </button>

  <!-- Notification Panel -->
  <div class="notification-panel" id="notificationPanel">
    <div class="notification-header">
      <h3><i class="fas fa-bell"></i> Notifications</h3>
      <button class="close-notifications" id="closeNotifications">&times;</button>
    </div>
    <div class="notification-content" id="notificationContent">
      <div class="no-notifications">
        <i class="fas fa-bell-slash" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.3;"></i>
        <p>No notifications yet</p>
      </div>
    </div>
  </div>

  <script>
    const videoUrl = document.getElementById('videoUrl');
    const fetchBtn = document.getElementById('fetchBtn');
    const urlError = document.getElementById('urlError');
    const loading = document.getElementById('loading');
    const videoInfo = document.getElementById('videoInfo');

    // Notification System Variables
    const notificationBtn = document.getElementById('notificationBtn');
    const notificationPanel = document.getElementById('notificationPanel');
    const closeNotifications = document.getElementById('closeNotifications');
    const notificationContent = document.getElementById('notificationContent');
    const notificationBadge = document.getElementById('notificationBadge');

    let notifications = [];
    let unreadCount = 0;

    // Initialize notification system
    initNotificationSystem();

    // Add enter key support
    videoUrl.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        fetchBtn.click();
      }
    });

    fetchBtn.addEventListener('click', async () => {
      const url = videoUrl.value.trim();
      
      // Reset states
      hideError();
      videoInfo.style.display = 'none';
      
      // Validation
      if (!url) {
        showError('Please enter a video URL');
        return;
      }

      if (!isValidUrl(url)) {
        showError('Please enter a valid URL');
        return;
      }

      // Show loading
      showLoading();
      
      try {
        const response = await fetch(`https://instavideo-uhd.onrender.com/api/video-info?url=${encodeURIComponent(url)}`);
        const data = await response.json();
        
        hideLoading();
        
        if (!data.formats || data.formats.length === 0) {
          showError('No downloadable formats found for this video');
          return;
        }

        displayVideoInfo(data);
        
        // Add notification for successful fetch
        addNotification(
          'Video Information Fetched',
          `Successfully loaded information for: ${data.title || 'Unknown Video'}`,
          'success'
        );
        
      } catch (error) {
        hideLoading();
        showError('Failed to fetch video information. Please try again.');
        console.error('Error:', error);
        
        // Add notification for error
        addNotification(
          'Error Occurred',
          'Failed to fetch video information. Please check your URL and try again.',
          'error'
        );
      }
    });

    // Notification System Functions
    function initNotificationSystem() {
      // Load notifications from external source (you can change this URL)
      loadExternalNotifications();
      
      // Event listeners
      notificationBtn.addEventListener('click', toggleNotificationPanel);
      closeNotifications.addEventListener('click', toggleNotificationPanel);
      
      // Close panel when clicking outside
      document.addEventListener('click', (e) => {
        if (!notificationPanel.contains(e.target) && !notificationBtn.contains(e.target)) {
          if (notificationPanel.classList.contains('open')) {
            toggleNotificationPanel();
          }
        }
      });
      
      // Check for new notifications every 30 seconds
      setInterval(loadExternalNotifications, 30000);
      
      // Add welcome notification
      setTimeout(() => {
        addNotification(
          'Welcome!',
          'Professional Video Downloader is ready to use. Paste a video URL to get started.',
          'info'
        );
      }, 2000);
    }

    function toggleNotificationPanel() {
      notificationPanel.classList.toggle('open');
      
      // Mark all as read when opening
      if (notificationPanel.classList.contains('open')) {
        markAllAsRead();
      }
    }

    function addNotification(title, message, type = 'info') {
      const notification = {
        id: Date.now(),
        title: title,
        message: message,
        type: type,
        timestamp: new Date().toISOString(),
        read: false
      };
      
      notifications.unshift(notification);
      unreadCount++;
      
      updateNotificationDisplay();
      updateNotificationBadge();
    }

    function updateNotificationDisplay() {
      if (notifications.length === 0) {
        notificationContent.innerHTML = `
          <div class="no-notifications">
            <i class="fas fa-bell-slash" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.3;"></i>
            <p>No notifications yet</p>
          </div>
        `;
        return;
      }
      
      let html = '';
      notifications.forEach(notification => {
        const timeAgo = formatTimeAgo(new Date(notification.timestamp));
        const typeIcon = getNotificationIcon(notification.type);
        
        html += `
          <div class="notification-item ${!notification.read ? 'unread' : ''}" data-id="${notification.id}">
            <div class="notification-title">
              <i class="${typeIcon}" style="margin-right: 8px; color: ${getNotificationColor(notification.type)};"></i>
              ${notification.title}
            </div>
            <div class="notification-message">${notification.message}</div>
            <div class="notification-time">${timeAgo}</div>
          </div>
        `;
      });
      
      notificationContent.innerHTML = html;
    }

    function updateNotificationBadge() {
      if (unreadCount > 0) {
        notificationBadge.textContent = unreadCount > 99 ? '99+' : unreadCount;
        notificationBadge.style.display = 'flex';
      } else {
        notificationBadge.style.display = 'none';
      }
    }

    function markAllAsRead() {
      notifications.forEach(notification => {
        notification.read = true;
      });
      unreadCount = 0;
      updateNotificationDisplay();
      updateNotificationBadge();
    }

    function getNotificationIcon(type) {
      switch (type) {
        case 'success': return 'fas fa-check-circle';
        case 'error': return 'fas fa-exclamation-circle';
        case 'warning': return 'fas fa-exclamation-triangle';
        case 'info': return 'fas fa-info-circle';
        default: return 'fas fa-bell';
      }
    }

    function getNotificationColor(type) {
      switch (type) {
        case 'success': return '#27ae60';
        case 'error': return '#e74c3c';
        case 'warning': return '#f39c12';
        case 'info': return '#3498db';
        default: return '#667eea';
      }
    }

    function formatTimeAgo(date) {
      const now = new Date();
      const diffInSeconds = Math.floor((now - date) / 1000);
      
      if (diffInSeconds < 60) return 'Just now';
      if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;
      if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
      return `${Math.floor(diffInSeconds / 86400)} days ago`;
    }

    // Function to load notifications from external HTML file
    async function loadExternalNotifications() {
      try {
        // You can change this to point to your notifications HTML file
        // For example: 'notifications.html' or any other URL
        const response = await fetch('notifications.html');
        if (response.ok) {
          const html = await response.text();
          parseExternalNotifications(html);
        }
      } catch (error) {
        console.log('No external notifications file found or error loading:', error.message);
      }
    }

    function parseExternalNotifications(html) {
      // Parse the HTML and extract notification data
      // This is a simple example - you can modify the format as needed
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      
      const notificationElements = doc.querySelectorAll('.external-notification');
      
      notificationElements.forEach(element => {
        const title = element.querySelector('.notification-title')?.textContent || 'New Notification';
        const message = element.querySelector('.notification-message')?.textContent || '';
        const type = element.getAttribute('data-type') || 'info';
        const id = element.getAttribute('data-id');
        
        // Check if this notification already exists
        if (!notifications.find(n => n.id === id)) {
          const notification = {
            id: id || Date.now(),
            title: title,
            message: message,
            type: type,
            timestamp: new Date().toISOString(),
            read: false
          };
          
          notifications.unshift(notification);
          unreadCount++;
        }
      });
      
      updateNotificationDisplay();
      updateNotificationBadge();
    }

    // Rest of your existing functions...
    function isValidUrl(string) {
      try {
        new URL(string);
        return true;
      } catch (_) {
        return false;
      }
    }

    function showError(message) {
      urlError.querySelector('span').textContent = message;
      urlError.style.display = 'flex';
    }

    function hideError() {
      urlError.style.display = 'none';
    }

    function showLoading() {
      fetchBtn.disabled = true;
      fetchBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
      loading.style.display = 'block';
    }

    function hideLoading() {
      fetchBtn.disabled = false;
      fetchBtn.innerHTML = '<i class="fas fa-search"></i> Fetch Video';
      loading.style.display = 'none';
    }

    function displayVideoInfo(data) {
      const thumbnail = data.thumbnail || 'https://via.placeholder.com/200x150?text=No+Thumbnail';
      const title = data.title || 'Unknown Title';
      const duration = data.duration || 'Unknown';
      const uploader = data.uploader || 'Unknown';
      
      let html = `
        <div class="video-header">
          <img src="${thumbnail}" alt="Video Thumbnail" class="video-thumbnail" />
          <div class="video-details">
            <h3>${title}</h3>
            <div class="video-meta">
              <div class="meta-item">
                <i class="fas fa-clock"></i>
                <span>${formatDuration(duration)}</span>
              </div>
              <div class="meta-item">
                <i class="fas fa-user"></i>
                <span>${uploader}</span>
              </div>
            </div>
          </div>
        </div>

        <div class="formats-section">
          <h3 class="formats-title">
            <i class="fas fa-download"></i>
